# Cursor Agent 指导文档

本文件为 Cursor AI 提供项目级指导，与 `.cursor/rules/` 中的规则一起使用。

## 项目简介

- **项目类型**：纯 Agent 项目（不编写代码）
- **主要工具**：MCP (Model Context Protocol) 工具
- **执行目标**：通过 MCP 工具执行其他软件，如浏览器自动化、系统操作等
- **主要目标**：使用 AI Agent 通过 MCP 协议与外部工具和服务交互，完成自动化任务

## 项目特点

- **无代码编写**：本项目不涉及编写代码，专注于通过 MCP 工具执行任务
- **工具驱动**：使用 MCP 服务器提供的工具（如 Playwright、Chrome DevTools 等）
- **任务导向**：通过自然语言指令，让 AI Agent 调用相应的 MCP 工具完成任务

## 目录结构

```
/ .cursor/rules  - Cursor 规则文件，指导 AI 如何使用 MCP 工具
/ AGENTS.md      - 本文件，项目级指导文档
/ （其他目录按需创建，如 logs/、screenshots/ 等）
```

## 可用的 MCP 工具

当前可用的 MCP 服务器包括：

- **Chrome DevTools**：浏览器自动化与调试（打开页面、点击、输入、截图、查看 DOM、网络请求、控制台日志等）

更多 MCP 工具可通过 Cursor 设置添加。

## 与 AI 协作时的约定

1. **语言**：回复与说明优先使用中文。
2. **工具使用**：
   - 优先使用 MCP 工具完成任务，而不是生成代码
   - 在使用 MCP 工具前，先检查工具的描述和参数要求
   - 对于浏览器操作，使用 Chrome DevTools MCP 工具
3. **任务执行**：
   - 明确任务目标，分步骤执行
   - 在执行操作前，先说明将要执行的动作
   - 对关键操作（如提交表单、删除数据）需确认
   - **登录场景处理**：如果遇到需要登录的场景（如页面出现登录表单、需要输入用户名密码、需要验证码等），立即告知用户并停止执行，等待用户明确指示后再继续
   - **交互操作验证**：对于点赞、收藏等交互操作，必须通过页面变动（如按钮颜色变化）验证操作是否成功。每次操作后等待至少 1 秒再验证。如果失败：相互依赖的操作链立即停止并告知；独立操作则继续完成剩余操作后统一告知所有结果
4. **安全与隐私**：
   - 不执行可能造成数据丢失或系统损坏的操作
   - 不访问或泄露敏感信息
   - 截图和日志中注意隐藏敏感内容
   - **不自动登录**：遇到登录页面时，不尝试自动填写或提交登录信息，必须停止并告知用户
5. **故障恢复**：
   - 遇到浏览器无响应或工具连接问题时，可以关闭有问题的页面并重新打开
   - 如果问题严重，可以建议重启 Cursor（需用户手动操作）
   - 如果需要用户帮助（如验证码、授权等），立即暂停并通知用户

## 常见任务示例

| 任务类型           | 使用工具           | 说明                     |
|-------------------|-------------------|--------------------------|
| 打开网页           | Chrome DevTools   | 使用 `new_page` 工具     |
| 选择页面           | Chrome DevTools   | 使用 `select_page` 工具 |
| 获取页面快照       | Chrome DevTools   | 使用 `take_snapshot` 工具（获取元素 uid）|
| 点击元素           | Chrome DevTools   | 使用 `click` 工具（需要元素 uid）|
| 填写表单           | Chrome DevTools   | 使用 `fill_form` 工具（需要元素 uid）|
| 按键操作           | Chrome DevTools   | 使用 `press_key` 工具    |
| 截图               | Chrome DevTools   | 使用 `take_screenshot` 工具 |
| 执行 JavaScript    | Chrome DevTools   | 使用 `evaluate_script` 工具 |
| 查看网络请求       | Chrome DevTools   | 使用 `list_network_requests` 工具 |
| 查看控制台日志     | Chrome DevTools   | 使用 `list_console_messages` 工具 |

## 工作流程

1. **理解任务**：明确用户想要完成的目标
2. **选择工具**：根据任务类型选择合适的 MCP 工具
3. **检查工具描述**：在使用前查看工具的 schema/描述文件，了解参数要求
4. **执行操作**：调用 MCP 工具执行任务
5. **验证结果**：检查操作结果，必要时截图或查看日志
6. **报告完成**：向用户说明已完成的操作和结果

---

更详细的 MCP 工具使用规范请参考 `.cursor/rules/mcp-tools.mdc`。
